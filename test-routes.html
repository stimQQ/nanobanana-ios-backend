<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Testing - NanoBanana</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #ccc;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #FFD700;
        }
        .test-section {
            background-color: #111;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            margin-left: 10px;
            font-weight: bold;
        }
        .status.success {
            background-color: #198754;
            color: white;
        }
        .status.error {
            background-color: #dc3545;
            color: white;
        }
        .status.pending {
            background-color: #6c757d;
            color: white;
        }
        button {
            background-color: #FFD700;
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
        }
        button:hover {
            background-color: #DAA520;
        }
        .route-link {
            color: #FFD700;
            text-decoration: none;
            margin-right: 15px;
        }
        .route-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>NanoBanana - Route Testing</h1>

        <div class="test-section">
            <h2>Page Routes</h2>
            <p>Click on each link to test if the routes are working:</p>
            <div style="margin-top: 15px;">
                <a href="/" target="_blank" class="route-link">Home (/)</a>
                <a href="/generate" target="_blank" class="route-link">Generate (/generate)</a>
                <a href="/login" target="_blank" class="route-link">Login (/login)</a>
                <a href="/gallery" target="_blank" class="route-link">Gallery (/gallery)</a>
                <a href="/profile" target="_blank" class="route-link">Profile (/profile)</a>
                <a href="/subscription" target="_blank" class="route-link">Subscription (/subscription)</a>
                <a href="/dashboard" target="_blank" class="route-link">Dashboard (/dashboard)</a>
            </div>
        </div>

        <div class="test-section">
            <h2>API Routes Test</h2>
            <button onclick="testAPIRoutes()">Test All API Routes</button>
            <button onclick="clearResults()">Clear Results</button>
            <div id="api-results" style="margin-top: 20px;"></div>
        </div>

        <div class="test-section">
            <h2>Error Pages Test</h2>
            <p>These should show appropriate error pages:</p>
            <div style="margin-top: 15px;">
                <a href="/non-existent-page" target="_blank" class="route-link">404 Page (Non-existent route)</a>
                <a href="/api/non-existent" target="_blank" class="route-link">API 404</a>
            </div>
        </div>

        <div class="test-section">
            <h2>Console Output</h2>
            <p>Open browser console (F12) to see detailed error messages</p>
            <div id="console-output" style="background-color: #000; padding: 10px; border-radius: 4px; font-family: monospace; margin-top: 10px; max-height: 200px; overflow-y: auto;">
                Waiting for tests...
            </div>
        </div>
    </div>

    <script>
        const apiRoutes = [
            { name: 'Status', url: '/api/status', method: 'GET' },
            { name: 'Test', url: '/api/test', method: 'GET' },
            { name: 'User Profile', url: '/api/user/profile', method: 'GET' },
            { name: 'Chat Messages', url: '/api/chat/messages', method: 'GET' },
        ];

        function addConsoleMessage(message, type = 'info') {
            const consoleDiv = document.getElementById('console-output');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#ccc';
            consoleDiv.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }

        async function testAPIRoute(route) {
            const resultDiv = document.createElement('div');
            resultDiv.style.marginBottom = '10px';

            try {
                addConsoleMessage(`Testing ${route.name}...`, 'info');
                const response = await fetch(route.url, {
                    method: route.method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });

                const statusClass = response.ok ? 'success' : 'error';
                const statusText = response.ok ? 'OK' : 'ERROR';

                resultDiv.innerHTML = `
                    <strong>${route.name}</strong> (${route.method} ${route.url})
                    <span class="status ${statusClass}">${response.status} ${statusText}</span>
                `;

                if (response.ok) {
                    addConsoleMessage(`✓ ${route.name} - Status: ${response.status}`, 'success');
                } else {
                    addConsoleMessage(`✗ ${route.name} - Status: ${response.status}`, 'error');
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <strong>${route.name}</strong> (${route.method} ${route.url})
                    <span class="status error">Network Error</span>
                `;
                addConsoleMessage(`✗ ${route.name} - Error: ${error.message}`, 'error');
                console.error(`Error testing ${route.name}:`, error);
            }

            return resultDiv;
        }

        async function testAPIRoutes() {
            const resultsDiv = document.getElementById('api-results');
            resultsDiv.innerHTML = '<p>Testing API routes...</p>';

            addConsoleMessage('Starting API route tests...', 'info');

            for (const route of apiRoutes) {
                const result = await testAPIRoute(route);
                if (resultsDiv.children.length === 1 && resultsDiv.children[0].tagName === 'P') {
                    resultsDiv.innerHTML = '';
                }
                resultsDiv.appendChild(result);
            }

            addConsoleMessage('API route tests completed!', 'success');
        }

        function clearResults() {
            document.getElementById('api-results').innerHTML = '';
            document.getElementById('console-output').innerHTML = 'Waiting for tests...';
        }

        // Initial message
        addConsoleMessage('Route testing page loaded successfully', 'success');
    </script>
</body>
</html>